<!doctype html>  

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ --> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
	<meta charset="utf-8">

	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame 
	Remove this if you use the .htaccess -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title></title>
	<meta name="description" content="">
	<meta name="author" content="">

	<!--  Mobile viewport optimized: j.mp/bplateviewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Place favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="apple-touch-icon" href="/apple-touch-icon.png">


	<!-- CSS : implied media="all" -->
	<link rel="stylesheet" href="css/style.css?v=2">

	<!-- Uncomment if you are specifically targeting less enabled mobile browsers
	<link rel="stylesheet" media="handheld" href="css/handheld.css?v=2">  -->

	<!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
	<script src="js/libs/modernizr-1.6.min.js"></script>

</head>

<body>

	<div id="container">
		<header>

		</header>

		<div id="main">
			<h2 id="instructions">Enter your Credentials</h2><br>
			<div id="step1">
				<form>
					<label for="aws_key">AWS Key</label><input type="text" name="key" id="aws_key" /><br />
					<label for="aws_secret">AWS Secret</label><input type="text" name="secret" id="aws_secret" /><br /><br />
					<input type="button" value="continue" onclick="from_step_1()" />
				</form>
			</div>
			
			<div id="step2" style="display:none">
				<ul id="buckets"></ul>
			</div>
			
			<div id="step3" style="display: none">
				<audio controls="controls">
					Your browser does not support the audio element.
				</audio>
			</div>
		</div>

		<footer>

		</footer>
	</div> <!--! end of #container -->


	<!-- Javascript at the bottom for fast page loading -->

	<!-- Grab Google CDN's jQuery. fall back to local if necessary -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>
	<script>!window.jQuery && document.write(unescape('%3Cscript src="js/libs/jquery-1.4.2.js"%3E%3C/script%3E'))</script>


	<!-- scripts concatenated and minified via ant build script-->
	<script src="js/plugins.js"></script>
	<script src="js/script.js"></script>
	<!-- end concatenated and minified scripts-->


	<!--[if lt IE 7 ]>
	<script src="js/libs/dd_belatedpng.js"></script>
	<script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
	<![endif]-->

	<!-- S3 scripts -->
	<script src="js/libs/json2.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/libs/sha1.js" type="text/javascript" charset="utf-8"></script>
	<!--script src="js/libs/js3db.js" type="text/javascript" charset="utf-8"></script-->
	<script src="js/libs/S3Ajax.js" type="text/javascript" charset="utf-8"></script>
	<!-- end S3 scripts -->
	
	<script type="text/javascript" charset="utf-8">
		
		
		var from_step_1 = function() {
			// get info
			if (S3Ajax.KEY_ID.length == 0)
				S3Ajax.KEY_ID = $('#aws_key').val();
			if (S3Ajax.SECRET_KEY.length == 0)
				S3Ajax.SECRET_KEY = $('#aws_secret').val();
			
			// move to next step
			S3Ajax.listBuckets(function(request, obj) {
				var buckets = obj.ListAllMyBucketsResult.Buckets.Bucket;
				for (i=0; i < buckets.length; i++) {
					var bucket = buckets[i];
					$('#buckets').append('<a href="#" onclick="from_step_2(\'' + bucket.Name + '\')"><li>' + bucket.Name + '</li></a>');
				}
				$('#step1').slideUp();
				$('#instructions').html('Choose a bucket');
				$('#step2').slideDown();
			}, function(request, object) {
				alert('Your keys must have been wrong...');
			})
		}
		
		var from_step_2 = function(bucket_name) {
			alert('chose ' + bucket_name);
		}
	</script>
</body>
</html>